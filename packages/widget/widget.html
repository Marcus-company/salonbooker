<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Boek eenvoudig een afspraak bij HairsalonX">
  <title>Boek een afspraak - HairsalonX</title>
  <link rel="stylesheet" href="widget.css">
  <!-- Supabase JS Client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
</head>
<body>
  <div class="sb-widget" role="main" aria-label="Afspraak boeking">
    <!-- Header -->
    <header class="sb-header">
      <h1 class="sb-title">Boek je afspraak</h1>
      <p class="sb-subtitle">Kies een datum en tijd die jou uitkomt</p>
    </header>

    <!-- Loading State -->
    <div class="sb-loading-overlay sb-step-hidden" id="loading" aria-live="polite" aria-busy="true">
      <div class="sb-spinner" aria-hidden="true"></div>
      <p>Laden...</p>
    </div>

    <!-- Step 1: Service Selection -->
    <section class="sb-step sb-step-hidden" id="step-1" aria-labelledby="step-1-title">
      <h2 class="sb-step-title" id="step-1-title">
        <span class="sb-step-number">1</span>
        Kies een behandeling
      </h2>
      <div class="sb-services" id="services-list" role="radiogroup" aria-label="Beschikbare behandelingen">
        <!-- Services loaded from Supabase -->
      </div>
    </section>

    <!-- Step 2: Date & Time -->
    <section class="sb-step sb-step-hidden" id="step-2" aria-labelledby="step-2-title">
      <h2 class="sb-step-title" id="step-2-title">
        <span class="sb-step-number">2</span>
        Kies een datum
      </h2>
      <div class="sb-calendar">
        <div class="sb-calendar-header">
          <button class="sb-calendar-nav" id="prev-month" aria-label="Vorige maand">‹</button>
          <span class="sb-calendar-month" id="current-month">Februari 2026</span>
          <button class="sb-calendar-nav" id="next-month" aria-label="Volgende maand">›</button>
        </div>
        <div class="sb-calendar-grid" id="calendar-grid" role="grid" aria-label="Kalender">
          <!-- Generated by JS -->
        </div>
      </div>
      
      <div class="sb-time-section">
        <h3 class="sb-time-title">
          Beschikbare tijden
          <span id="time-slots-count"></span>
        </h3>
        <div class="sb-time-slots" id="time-slots" role="radiogroup" aria-label="Beschikbare tijdsloten">
          <div class="sb-time-hint">Selecteer eerst een datum om de beschikbare tijden te zien</div>
        </div>
      </div>
    </section>

    <!-- Step 3: Customer Details -->
    <section class="sb-step sb-step-hidden" id="step-3" aria-labelledby="step-3-title">
      <h2 class="sb-step-title" id="step-3-title">
        <span class="sb-step-number">3</span>
        Jouw gegevens
      </h2>
      <form class="sb-form" id="booking-form" novalidate>
        <div class="sb-form-group">
          <label class="sb-label sb-required" for="name">Naam</label>
          <input 
            type="text" 
            id="name" 
            class="sb-input" 
            placeholder="Jouw naam" 
            required 
            autocomplete="name"
            minlength="2"
            maxlength="100"
            aria-describedby="name-hint"
          >
          <span class="sb-input-hint" id="name-hint">Vul je voor- en achternaam in</span>
        </div>
        <div class="sb-form-group">
          <label class="sb-label sb-required" for="phone">Telefoon</label>
          <input 
            type="tel" 
            id="phone" 
            class="sb-input" 
            placeholder="06-12345678" 
            required 
            autocomplete="tel"
            pattern="[0-9\-\+\s\(\)]+"
            minlength="10"
            maxlength="20"
            aria-describedby="phone-hint"
          >
          <span class="sb-input-hint" id="phone-hint">Vul een geldig Nederlands telefoonnummer in</span>
        </div>
        <div class="sb-form-group">
          <label class="sb-label" for="email">Email</label>
          <input 
            type="email" 
            id="email" 
            class="sb-input" 
            placeholder="jouw@email.nl"
            autocomplete="email"
            aria-describedby="email-hint"
          >
          <span class="sb-input-hint" id="email-hint">Optioneel - voor bevestigingsmail</span>
        </div>
        <div class="sb-form-group">
          <label class="sb-label" for="notes">Opmerkingen</label>
          <textarea 
            id="notes" 
            class="sb-textarea" 
            placeholder="Bijv. allergieën, voorkeuren, gewenste kapper..."
            maxlength="500"
            aria-describedby="notes-hint"
          ></textarea>
          <span class="sb-input-hint" id="notes-hint">Maximaal 500 tekens</span>
        </div>
      </form>
    </section>

    <!-- Summary -->
    <aside class="sb-summary sb-step-hidden" id="summary" aria-label="Afspraak samenvatting">
      <h3 class="sb-summary-title">Samenvatting</h3>
      <div class="sb-summary-item">
        <span class="sb-summary-label">Behandeling:</span>
        <span class="sb-summary-value" id="summary-service">-</span>
      </div>
      <div class="sb-summary-item">
        <span class="sb-summary-label">Datum:</span>
        <span class="sb-summary-value" id="summary-date">-</span>
      </div>
      <div class="sb-summary-item">
        <span class="sb-summary-label">Tijd:</span>
        <span class="sb-summary-value" id="summary-time">-</span>
      </div>
      <div class="sb-summary-item sb-summary-total">
        <span class="sb-summary-label">Totaal:</span>
        <span class="sb-summary-value" id="summary-price">-</span>
      </div>
    </aside>

    <!-- Actions -->
    <nav class="sb-actions" id="actions" aria-label="Navigatie">
      <button class="sb-btn sb-btn-secondary" id="btn-back" type="button" style="display: none;">Terug</button>
      <button class="sb-btn sb-btn-primary" id="btn-next" type="button">Volgende</button>
    </nav>

    <!-- Success Message -->
    <section class="sb-success sb-step-hidden" id="success" aria-live="polite">
      <div class="sb-success-icon" aria-hidden="true">✓</div>
      <h2 class="sb-success-title">Afspraak verzoek verstuurd!</h2>
      <p class="sb-success-text">Je ontvangt een bevestiging via email zodra je afspraak is goedgekeurd.</p>
      <div class="sb-success-booking-id" id="booking-id" style="display: none;">
        Boekingsnummer
        <strong id="booking-id-value">-</strong>
      </div>
    </section>

    <!-- Confirmation Dialog -->
    <div class="sb-confirm-overlay" id="confirm-dialog" role="dialog" aria-modal="true" aria-labelledby="confirm-title" aria-describedby="confirm-text">
      <div class="sb-confirm-dialog">
        <h3 class="sb-confirm-title" id="confirm-title">Afspraak bevestigen?</h3>
        <p class="sb-confirm-text" id="confirm-text">Weet je zeker dat je deze afspraak wilt maken? Je ontvangt een bevestiging zodra deze is goedgekeurd.</p>
        <div class="sb-confirm-actions">
          <button class="sb-btn sb-btn-secondary" id="btn-cancel" type="button">Annuleren</button>
          <button class="sb-btn sb-btn-primary" id="btn-confirm" type="button">Bevestigen</button>
        </div>
      </div>
    </div>

    <!-- Error Toast -->
    <div class="sb-error-toast" id="error-toast" role="alert" aria-live="assertive"></div>
  </div>

  <script src="widget.js"></script>
</body>
</html>
